# Midterm 1 Marking Guide

This document outlines the core concepts tested by each question of the midterm exam and allocates partial marks in alignment with mastery of those concepts.

## Question 1a
1 pt for a clear description related to branch prediction, OOE, or excess instructions executed

0.5 pt for a vague mention of any of those keywords.


## Question 1b
1 pt for a clear description of frequency of use

0.5 pt for describing "hot data" instead or particularly vague answer that still suggests temporality

## Question 1c
1 pt for a clear description related to waiting time or cycles or that discusses latency hiding

0.5 pt for a vague mention of waiting

## Question 1d
1 pt for a clear description of accessing things near each other or for clear distinction between spatial and temporal locality

0.5 pt for a vague reference to spatial and/or temporal locality or an answer that only addresses one specific type of locality

## Question 1e
1 pt for a clear answer that specifically relates the bottleneck to being memory-related

0.5 pt for a vague respond or one that does not connect memory and boundedness explicitly

## Question 2a
Of the three points in the solution, score the student's best 2.

1 pt for a clear response
0.5 pt for on-topic but vague

## Question 2b
Of the three points in the solution, score the student's best 2.

1 pt for a clear response
0.5 pt for on-topic but vague

## Question 2c
2 pts to anything that connects this to practice effectively.

1 pt to something on topic but imprecise.

## Question 3
1 pt: - Indicating SoA vs AoS or hot vs cold data
1 pt: - Showing which field should be separated as "cold"
1 pt: - Showing how to assemble the hot and cold data into one SoA
1 pt: - Identifying that std::string is an expensive data type that can be simplified
1 pt: - Factoring the names out into a separate contiguous vector
1 pt: - Correctly identifying how the if condition should change for the SoA. Shows how to apply hot data.
1 pt: - Mentioning tiling the *outer* loop
1 pt: - Correctly demonstrating how to perform the tiling, i.e., loop variables and num loops

alternatives:
 * instead of tiling, may use a sort with better branch prediction
 * in addition to tiling, may unroll inner loop with parallel reduction to expose more ILP

bonus:
1 pt: - Replacing pointers to factored name vectors with indexes using a smaller integral type, with justification.


## Question 4
2 pts for a clear description that measures cache performance directly, both in terms of reducing working set size (spatial locality) and cache hit rates (temporal locality); or directly measures one aspect and correlates with a second relevant metric (e.g., CPI)

1.5 pts for a clear description that measures cache performance indirectly; or like 2 but only covers one type of locality

1 pt a vague description that would measure cache performance direclty

0.5 pts a vague description that would measure cache performance indirectly


## Question 5a
2 pts for reordering fields to eliminate padding

1 pt for ordering backwards

+1 bonus for identifying error in question


## Question 5b
1 pt for some method that directly measures the size of the struct, e.g., sizeof()

0.5 pts for a clear description of a method that measures the size indirectly (e.g., running time); or for a mathematical argument/justification that doesn't use profiling tools.
